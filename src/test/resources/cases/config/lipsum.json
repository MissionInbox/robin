{
  "$schema": "../../../../main/resources/schema/case.schema.json",

  "retry": 1,
  "delay": 2,

  "tls": true,

  "envelopes": [
    {
      "file": "src/test/resources/cases/sources/lipsum.eml",

      "assertions": {
        "smtp": [
          ["MAIL", "250 2.1.0 Sender OK"],
          ["RCPT", "250 2.1.5 Recipient OK"],
          ["DATA", "^250 2.0.0"],
          ["DATA", "Received email OKAY"]
        ],
        "external": [
          {
            "type": "logs",
            "wait": 5,
            "delay": 5,
            "retry": 3,
            "verify": ["QUIT"],
            "match": [
              ["250 2.0.0", "Received email OKAY"]
            ],
            "refuse": [
              ["java.lang.NullPointerException"]
            ]
          }
        ]
      }
    }
  ],

  "assertions": {
    "smtp": [
      [ "SMTP", "^220" ],
      [ "EHLO", "STARTTLS" ],
      [ "SHLO", "250 CHUNKING" ],
      [ "QUIT" ]
    ]
  }
}